# MINIMAL ROGUE - Project Progress (2026-02-21 Update)

## 概要
「線と記号」のみで構成されたミニマルな復讐譚ローグライクRPG。
仲間に裏切られ、暗いダンジョンの底へと突き落とされた主人公。
地下100階に眠る「ダンジョンコア」の破壊を目指します。

## 実装済み機能

### 1. ビジュアル & 演出 (Aesthetic & Polish)
- **シンボル構成**: プレイヤー(`＠`), 壁(`█`), 床(`·`), 敵(`E`), 穴(`◯`), セーブ点(`S`), カギ(`k`), 扉(`☒`), 設置ブロック(`□`), 聖なる剣(`†`), 聖なる鎧(`▼`), 加速の魔導書(`▤`), 魅了の魔導書(`▤`), オーク(`O`)。
- **動的なUI**: 
    - **スタミナゲージ**: 左上のST表示を青色のバー形式に変更。
    - **氷の床 (❄️)**: 地下6階以降に出現する特殊地形。
    - **スライド移動**: プレイヤー・敵ともに、氷の上では壁や障害物にぶつかるまで一方向に滑り続ける。
    - **滑り中の建築**: 滑っている最中も魔法の杖でブロックを設置可能。進行方向に設置すれば強制停止できる。
    - **敵への影響**: 敵も制御を失って滑るため、地形を利用した誘導や穴への落下狙いが可能。
- **地形・ギミック**: 毒沼（≈）、接地ブロック（□）、崩れるブロック（▧）。30%以下で赤く点滅する警告機能付き。
    - **方向転換アニメーション**: プレイヤーが左右に移動した際、シンボルが進行方向を向く（反転する）ように。
- **強化された演出**: 
    - カギのかかった穴(`☒`)の視認識性を向上（サイズ1.6倍）。
    - 敵が穴に落ちる際、1秒間の点滅（もがき）を経て消滅するアニメーションを実装。

### 2. ゲームシステム & アイテム
- **魅了の魔導書 (Charm Tome)**: 性能を大幅強化。周囲8マスの全ての敵を一気に仲間にできる。
- **味方AIの進化**: 魅了された敵はプレイヤーの背後や隣を賢く追従し、不必要に重ならないように。また、階層の穴にうっかり落ちるようになり、道連れのリスクも追加。
- **テストモード (Stage Select)**: ステージセレクトを開始すると、その階層に見合ったレベルとHPで開始できる特別なデバッグ/調整モード。
- **ダンジョン生成の多様化**:
    - **Great Hall (大部屋)**: 巨大な空間に規則正しく柱が並ぶ、神殿のような広大なフロア。
    - **Narrow Maze (細い迷路)**: 壁が多く、一歩先が見通せない複雑なフロア。
    - **生成の安定化**: 出口やカギが壁に埋まったり消失したりしないよう、配置ロジックを最優先・最終ステップに修正。

### 3. 敵キャラクター & AI
- **NEW! オーク (O)**: 地下10階から出現する強敵。
    - **力の溜め (Charge-up)**: 攻撃前に大きく身を引き、小刻みに震えながら力を蓄えるダイナミックな予兆演出。
    - **おしのけ移動 (Shove)**: 進路を他の敵に塞がれた際、その敵と場所を入れ替わって強引に前進する。他の敵を盾にして逃げることは不可能。
    - **無限の突き飛ばし**: 殴られると壁や穴にぶつかるまで、フロアの端から端までどこまでも吹き飛ばされる。
    - **衝突ダメージ (BUMP!)**: 吹き飛ばされている主人公が他の敵に接触すると、その敵に大ダメージを与えつつ弾き飛ばす「人間弾丸」に。
    - **リバウンド**: 背後に壁がある場合でも、空いている横の方向などへ強制的に押し出されるため、袋小路でもタックルを回避できない。
    - **赤い脅威**: 鮮烈な赤色で表示され、一目で危険だと分かるデザイン。高いHPと基本攻撃力を持つ。
- **既存の敵**: 
    - 通常敵(`E`), 大蛇(`ENEMY`), ゴールデン・エネミー, ウィル・オ・ウィスプ(`※`)。

## テクニカル
- **Sound**: 全て Web Audio API による動的生成。
- **UI Architecture**: HTML要素を最小限に抑え、Canvas上で全てを描画。CSSによるスムーズなバー・アニメーション。
- **Logic**: 非同期処理(`async/await`)を多用した、イベント駆動型のターンベースシステム。

## 次のステップ
- ボスキャラクターの実装検討。
- 各階層のバランス調整。
- エンディング演出の構想。
